@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
:root{
  --bg:#060a11;
  --fg:rgba(231,236,243,0.90);
  --muted:rgba(255,255,255,0.60);
  --fg-strong:#FFFFFF;
  --primary:#3E8BFF;
  --accent:#6B70FF;
  --inputBg:rgba(255,255,255,0.04);
  --border:rgba(255,255,255,0.06);
  --surface1:rgba(255,255,255,0.03);
  --surface2:rgba(255,255,255,0.06);
  --radius:24px;
  --radius-sm:16px;
  --ring:rgba(62,139,255,0.35);
  --shadow:0 8px 32px rgba(0,0,0,0.45);
  --inner-highlight:0 1px 0 rgba(255,255,255,0.04) inset;
  --ac-1:#3E8BFF;
  --ac-2:#6B70FF;
}
html,body,#root{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}

/* App bar (sticky, blurred) */
.appbar{position:sticky;top:0;z-index:20;background:linear-gradient(180deg, rgba(18,18,18,.9), rgba(18,18,18,.6));backdrop-filter:blur(8px)}

/* Cards & sections */
.card{
  position:relative;
  background:linear-gradient(180deg, rgba(24,31,46,0.86), rgba(12,18,28,0.92));
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
}
.card::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  box-shadow:var(--inner-highlight);
  pointer-events:none;
}
.h1{font-size:28px;font-weight:800;letter-spacing:-.2px}
.h2{font-size:12px;font-weight:700;color:var(--muted);letter-spacing:.4px}

/* ---- FORM LAYOUT (Slack-like) ---- */
.formGrid{display:grid;grid-template-columns:1fr;gap:14px}
@media(min-width:960px){.formGrid{grid-template-columns:1fr 1fr;column-gap:16px}}

.field{display:flex;flex-direction:column;gap:6px}
.label{font-size:12px;font-weight:600;color:var(--muted);letter-spacing:.2px}
.hint{font-size:12px;color:#9a9aa2}
.input,.select{
  height:44px;border-radius:var(--radius-sm);background:var(--inputBg);
  border:1px solid var(--border);color:var(--fg);padding:0 12px;outline:none
}
.input:focus,.select:focus{border-color:#7f55e0;box-shadow:0 0 0 3px var(--ring)}
.groupTitle{font-size:12px;font-weight:700;color:var(--muted);letter-spacing:.4px;margin:6px 0}

/* subcards for nested inputs (e.g., manual splits / CPLs) */
.subCard{
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:20px;
  padding:18px;
  backdrop-filter:blur(12px);
  box-shadow:var(--shadow);
}

/* input with suffix affix */
.inputAffix{position:relative}
.inputAffix .suf{position:absolute;right:10px;top:50%;transform:translateY(-50%);color:var(--muted);font-size:12px}

/* ---- SWITCH (accessible, Slack-style) ---- */
.toggleRow{
  display:flex;align-items:center;justify-content:space-between;
  gap:16px;background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:22px;padding:18px 20px;
  backdrop-filter:blur(12px);
  box-shadow:var(--shadow);
}
.toggleText{display:flex;flex-direction:column;gap:2px}
.toggleTitle{font-weight:700;color:var(--fg-strong)}
.toggleHelp{font-size:12px;color:var(--muted)}
.switch{
  position:relative;width:44px;height:26px;border-radius:999px;border:1px solid var(--border);
  background:#2a2a2f;transition:all .18s ease-out;flex:0 0 44px
}
.switch[data-checked="true"]{background:var(--primary);border-color:#6c39d8}
.knob{position:absolute;top:3px;left:3px;width:20px;height:20px;border-radius:999px;background:#fff;transition:transform .18s}
.switch[data-checked="true"] .knob{transform:translateX(18px)}
.srOnly{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* ---- PLATFORM CHIPS ---- */
.chips{display:flex;flex-wrap:wrap;gap:8px}
.chip{
  display:inline-flex;align-items:center;height:32px;padding:0 12px;border-radius:999px;
  border:1px solid var(--border);background:#232326;color:var(--fg);cursor:pointer;transition:all .15s
}
.chip:hover{transform:translateY(-1px);background:#2a2a2f}
.chip[aria-pressed="true"]{background:var(--primary);color:#fff;border-color:#6c39d8}

/* Table (pill rows) */
.tableWrap{overflow:auto;border-radius:var(--radius)}
.table{width:100%;border-collapse:separate;border-spacing:0 8px}
.table thead th{font-size:12px;color:var(--muted);text-align:right;padding:10px}
.table thead th:first-child,.table td:first-child{text-align:left}
.table tbody tr{background:var(--surface1)}
.table tbody td{padding:10px 12px;border-top:1px solid var(--border);border-bottom:1px solid var(--border);text-align:right}
.table tbody tr:hover{background:#232327}
.table tfoot td{padding:12px 10px;font-weight:700}
.tnum{font-variant-numeric:tabular-nums}

/* Charts wrapper */
.chart{background:linear-gradient(180deg,var(--surface2),var(--surface1));border:1px solid var(--border);
  border-radius:var(--radius);box-shadow:var(--shadow);padding:12px}

/* Utilities */
.divider{border-top:1px solid #2b2b2e}
.badge{font-size:11px;color:var(--muted);padding:3px 8px;border:1px solid var(--border);border-radius:999px}
.btn{height:36px;padding:0 12px;border-radius:12px;border:1px solid var(--border);background:transparent;color:var(--fg)}
.btn.primary{background:var(--primary);color:#fff;border-color:#6c39d8}

/* ==== PREMIUM APP BACKGROUND & TYPOGRAPHY ==== */
.appBg{
  position:relative;
  min-height:100vh;
  background:
    radial-gradient(1200px 900px at -10% -20%, rgba(62,139,255,0.20), transparent 65%),
    radial-gradient(1000px 800px at 120% 130%, rgba(107,112,255,0.18), transparent 65%),
    linear-gradient(to bottom, rgba(16,22,30,0.55), rgba(10,14,20,0.55));
}
.appBg::after{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(1000px 700px at 50% -10%, rgba(255,255,255,0.08), transparent 65%);
  mix-blend-mode:overlay;
  opacity:.32;
  transition:opacity .35s ease;
}
body.planner-in .appBg::after{opacity:.18}

/* ==== Planner Hero & Layout ==== */
.planner-shell{
  padding-block:clamp(36px,8vw,96px);
}

.planner-grid{
  max-width:1200px;
  margin:0 auto;
  padding-inline:clamp(24px,4vw,32px);
  display:grid;
  gap:clamp(32px,5vw,48px);
}

.planner-card-wrap,
.planner-copy{
  display:flex;
  flex-direction:column;
  gap:clamp(16px,3vw,24px);
}

.planner-card{
  position:relative;
  background:linear-gradient(180deg, rgba(22,30,45,0.92), rgba(9,13,22,0.96));
  border:1px solid var(--border);
  border-radius:32px;
  padding:clamp(24px,3vw,32px);
  color:var(--fg);
  box-shadow:var(--shadow);
  backdrop-filter:blur(18px);
}

.planner-card::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  box-shadow:var(--inner-highlight);
  pointer-events:none;
}

.planner-card__content{
  display:flex;
  flex-direction:column;
  gap:16px;
}

.planner-tag{
  font-size:12px;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.24em;
  color:rgba(255,255,255,0.48);
  margin-bottom:6px;
}

.planner-field{
  display:flex;
  flex-direction:column;
  gap:6px;
}

.planner-label{
  font-size:12px;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.24em;
  color:var(--muted);
}

.planner-hint{
  font-size:12px;
  color:rgba(231,236,243,0.55);
}

.planner-input,
.planner-select{
  height:var(--field-h);
  border-radius:999px;
  border:1px solid rgba(255,255,255,0.05);
  background:var(--inputBg);
  color:var(--fg);
  padding:0 var(--field-px);
  font-size:15px;
  font-weight:500;
  letter-spacing:.01em;
  transition:background .2s ease, border-color .2s ease, box-shadow .2s ease;
}

.planner-input::placeholder{color:rgba(231,236,243,0.45)}

.planner-input:focus,
.planner-select:focus{
  outline:none;
  background:rgba(255,255,255,0.06);
  border-color:rgba(62,139,255,0.55);
  box-shadow:0 0 0 2px var(--ring);
}

.planner-select{
  appearance:none;
  background-image:linear-gradient(45deg, transparent 50%, rgba(231,236,243,0.7) 50%),
    linear-gradient(135deg, rgba(231,236,243,0.7) 50%, transparent 50%);
  background-position:calc(100% - 22px) calc(50% - 3px), calc(100% - 16px) calc(50% - 3px);
  background-size:6px 6px, 6px 6px;
  background-repeat:no-repeat;
  padding-right:48px;
}

.planner-select option{
  background:#0b1019;
  color:var(--fg-strong);
}

.planner-objectives,
.planner-chips{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}

.planner-pill,
.planner-chip{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 16px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,0.05);
  background:rgba(255,255,255,0.04);
  color:rgba(231,236,243,0.88);
  font-size:14px;
  font-weight:600;
  letter-spacing:.01em;
  transition:transform .18s ease, box-shadow .18s ease, background .18s ease, color .18s ease;
  cursor:pointer;
}

.planner-pill:hover,
.planner-chip:hover{
  box-shadow:inset 0 0 0 1px rgba(114,137,218,0.25);
}

.planner-pill.is-active,
.planner-chip.is-active{
  color:#fff;
  background:linear-gradient(135deg, var(--ac-1), var(--ac-2));
  border-color:transparent;
  box-shadow:inset 0 0 18px rgba(114,137,218,0.4), 0 10px 28px rgba(8,12,20,0.45);
}

.planner-pill:focus-visible,
.planner-chip:focus-visible,
.planner-btn:focus-visible,
.planner-input:focus-visible,
.planner-select:focus-visible{
  outline:none;
  box-shadow:0 0 0 2px var(--ring);
}

.planner-mode{
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:24px;
  padding:18px;
  display:flex;
  flex-direction:column;
  gap:16px;
}

.planner-mode__top{
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  align-items:center;
}

.planner-mode__chip{
  display:inline-flex;
  align-items:center;
  gap:10px;
  color:rgba(231,236,243,0.88);
  font-size:13px;
  font-weight:600;
}

.planner-mode__chip-dot{
  width:8px;
  height:8px;
  border-radius:999px;
  background:var(--ac-1);
  box-shadow:0 0 12px rgba(62,139,255,0.45);
}

.planner-mode__row{
  display:flex;
  flex-wrap:wrap;
  gap:16px;
  align-items:center;
  justify-content:space-between;
}

.planner-seg{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,0.05);
  background:rgba(255,255,255,0.04);
}

.planner-seg button{
  min-width:96px;
  height:36px;
  border-radius:12px;
  border:none;
  background:transparent;
  color:rgba(231,236,243,0.7);
  font-weight:600;
  letter-spacing:.01em;
  cursor:pointer;
  transition:background .2s ease, color .2s ease, box-shadow .2s ease;
}

.planner-seg button.is-active{
  background:linear-gradient(135deg, var(--ac-1), var(--ac-2));
  color:#fff;
  box-shadow:inset 0 0 14px rgba(114,137,218,0.42);
}

.planner-seg button:focus-visible{
  outline:none;
  box-shadow:0 0 0 2px var(--ring);
}

.planner-toggle{
  display:flex;
  align-items:center;
  gap:10px;
  color:rgba(231,236,243,0.72);
  font-size:13px;
}

.planner-switch{
  position:relative;
  display:inline-flex;
  align-items:center;
  width:52px;
  height:28px;
  cursor:pointer;
}

.planner-switch input{opacity:0;width:0;height:0}

.planner-switch__track{
  position:absolute;
  inset:0;
  border-radius:999px;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.08);
  transition:background .2s ease, border-color .2s ease, box-shadow .2s ease;
}

.planner-switch__thumb{
  position:absolute;
  top:50%;
  left:6px;
  width:20px;
  height:20px;
  border-radius:999px;
  background:#ECF3FF;
  transform:translate(0,-50%);
  box-shadow:0 6px 18px rgba(8,12,20,0.45);
  transition:transform .22s cubic-bezier(.4,0,.2,1), background .2s ease;
}

.planner-switch input:checked + .planner-switch__track{
  background:linear-gradient(135deg, var(--ac-1), var(--ac-2));
  border-color:rgba(62,139,255,0.65);
  box-shadow:0 0 12px rgba(62,139,255,0.35);
}

.planner-switch input:checked + .planner-switch__track .planner-switch__thumb{
  transform:translate(22px,-50%);
  background:#fff;
}

.planner-switch:focus-within .planner-switch__track{
  box-shadow:0 0 0 2px var(--ring);
}

.planner-switch.is-disabled{
  opacity:0.4;
  cursor:not-allowed;
}

.planner-eyebrow{
  font-size:12px;
  font-weight:600;
  letter-spacing:.28em;
  text-transform:uppercase;
  color:rgba(255,255,255,0.45);
}

.planner-heading{
  margin:0;
  font-weight:800;
  font-size:clamp(28px,4vw,72px);
  line-height:1.05;
  color:var(--fg-strong);
}

.planner-subcopy{
  font-size:clamp(16px,1.2vw,20px);
  color:rgba(231,236,243,0.82);
  max-width:42ch;
}

.planner-note{
  font-size:14px;
  color:rgba(255,255,255,0.4);
  max-width:48ch;
}

.planner-cta{
  display:flex;
  flex-wrap:wrap;
  gap:16px;
  align-items:center;
}

.planner-btn{
  border:none;
  outline:none;
  cursor:pointer;
  font:inherit;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  font-weight:600;
  letter-spacing:.02em;
  transition:transform .2s ease, box-shadow .2s ease, filter .2s ease;
}

.planner-btn-primary{
  flex:1 1 240px;
  height:48px;
  border-radius:999px;
  background:linear-gradient(180deg,#0D1C2A,#152A43);
  color:#ECF3FF;
  box-shadow:inset 0 1px 0 rgba(236,243,255,0.16), 0 16px 42px rgba(5,12,24,0.45);
  border:1px solid rgba(62,139,255,0.25);
}

.planner-btn-primary:hover{
  filter:brightness(1.05);
}

.planner-btn-primary:active{
  transform:scale(.98);
  box-shadow:inset 0 1px 0 rgba(236,243,255,0.12), 0 8px 24px rgba(5,12,24,0.45);
}

.planner-link{
  color:rgba(255,255,255,0.5);
  text-decoration:none;
  font-weight:600;
  transition:color .2s ease;
}

.planner-link:hover{color:rgba(255,255,255,0.8)}

.planner-link:focus-visible{
  outline:none;
  box-shadow:0 1px 0 rgba(255,255,255,0.55);
}

@media (max-width:1023px){
  .planner-card-wrap{order:1}
  .planner-copy{order:2}
  .planner-cta{flex-direction:column;align-items:stretch;gap:8px}
  .planner-btn-primary{flex:1 1 auto;width:100%}
}

@media (min-width:1024px){
  .planner-grid{grid-template-columns:repeat(12,minmax(0,1fr));align-items:start}
  .planner-card-wrap{grid-column:span 7;order:2}
  .planner-copy{grid-column:span 5;order:1}
}

/* ==== KPI Summary ==== */
.kpi-panel{
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:28px;
  padding:24px;
  box-shadow:var(--shadow);
  backdrop-filter:blur(14px);
  width:100%;
  display:flex;
  flex-direction:column;
  gap:20px;
}

.kpi-panel .planner-tag{margin-bottom:14px;color:rgba(255,255,255,0.5)}

.kpi-status{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  padding:18px 20px;
  border-radius:22px;
  background:rgba(255,255,255,0.035);
  border:1px solid rgba(255,255,255,0.05);
  backdrop-filter:blur(10px);
}

.kpi-status__text{display:flex;flex-direction:column;gap:6px;color:rgba(231,236,243,0.82)}
.kpi-status__title{font-size:15px;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:#f1f5ff}
.kpi-status__sub{font-size:12px;color:rgba(231,236,243,0.68);letter-spacing:.02em;line-height:1.4}
.kpi-status .switch{flex-shrink:0}

.kpi-list{
  display:flex;
  flex-direction:column;
  gap:14px;
}

@media (max-width:640px){
  .kpi-status{flex-direction:column;align-items:flex-start;gap:12px}
  .kpi-status .switch{align-self:flex-end}
}

.kpi-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:16px 20px;
  border-radius:20px;
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.04);
  backdrop-filter:blur(6px);
}

.kpi-label{
  display:flex;
  align-items:center;
  gap:12px;
  font-size:13px;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.18em;
  color:rgba(231,236,243,0.68);
}

.kpi-dot{
  width:10px;
  height:10px;
  border-radius:999px;
  box-shadow:0 0 0 4px rgba(255,255,255,0.04);
}

.kpi-dot--accent{background:linear-gradient(135deg,var(--ac-1),var(--ac-2))}
.kpi-dot--reach{background:#4ade80}
.kpi-dot--efficiency{background:#60a5fa}
.kpi-dot--confidence{background:#c084fc}

.kpi-value{
  font-size:28px;
  font-weight:700;
  color:var(--fg-strong);
  font-variant-numeric:tabular-nums;
}

/* ==== GLOBAL RHYTHM ==== */
.container{max-width:1160px;margin-inline:auto;padding-inline:16px}
.section{margin-block:32px}
.stack-4 > * + *{margin-top:12px}
.stack-6 > * + *{margin-top:24px}

/* ==== TABLE PRO (sticky head + sort arrows + dark scrollbar) ==== */
.tableWrapPro{overflow:auto;max-height:56vh;border-radius:20px}
.tableSticky thead th{position:sticky;top:0;background:var(--surface1);z-index:1}
.thBtn{display:inline-flex;align-items:center;gap:6px}
.sortArrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;opacity:.35}
.sortAsc{border-bottom:7px solid #BDBDBD}
.sortDesc{border-top:7px solid #BDBDBD}
.tableWrapPro::-webkit-scrollbar{height:10px;width:12px}
.tableWrapPro::-webkit-scrollbar-thumb{background:#2B2C30;border-radius:10px}

/* ==== CHART PRO ==== */
.chart{position:relative;background:linear-gradient(180deg,var(--surface2),var(--surface1));border:1px solid var(--border);border-radius:20px;box-shadow:var(--shadow);padding:12px}
.chartTitle{font-size:12px;font-weight:700;color:#BDBDBD;letter-spacing:.4px;margin-bottom:8px}
.centerOverlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none}
.centerBubble{background:#111318;border:1px solid #2B2C30;border-radius:999px;padding:10px 14px;text-align:center;box-shadow:0 6px 20px rgba(0,0,0,.35)}
.centerBig{font-size:18px;font-weight:800;letter-spacing:-.2px}
.centerSub{font-size:12px;color:#BDBDBD}

/* ==== SKELETON & EMPTY ==== */
.skel{position:relative;overflow:hidden;background:#1b1c20;border-radius:8px}
.skel::after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.06),transparent);transform:translateX(-100%);animation:shimmer 1.2s infinite}
@keyframes shimmer{to{transform:translateX(100%)}}
.empty{display:flex;align-items:center;justify-content:center;height:160px;border:1px dashed #2B2C30;border-radius:16px;color:#BDBDBD;font-size:14px}

/* --- Toolbar --- */
.tableToolbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:space-between;margin:8px 0 10px}
.toolbarLeft,.toolbarRight{display:flex;gap:8px;align-items:center}
.search{position:relative}
.search input{height:36px;border-radius:10px;background:#1a1b1f;border:1px solid var(--border);color:#fff;padding:0 32px 0 36px}
.search svg{position:absolute;left:10px;top:50%;transform:translateY(-50%);opacity:.6}
.density{display:inline-flex;border:1px solid var(--border);border-radius:10px;overflow:hidden}
.density button{height:32px;padding:0 10px;background:#1a1b1f;color:#BDBDBD}
.density button[aria-pressed="true"]{background:#23252A;color:#fff}

/* --- Column chips modal (simple popover style) --- */
.colBtn{height:32px;padding:0 10px;border:1px solid var(--border);border-radius:10px;background:#1a1b1f;color:#fff}
.colPanel{position:absolute;right:0;margin-top:8px;background:#16171A;border:1px solid var(--border);border-radius:12px;padding:10px;min-width:220px;box-shadow:var(--elev);z-index:10}
.colRow{display:flex;align-items:center;gap:8px;padding:6px 4px}
.colRow input{accent-color:var(--primary)}

/* --- Sticky first column & compact density --- */
.stickyFirst thead th:first-child,
.stickyFirst tbody td:first-child{position:sticky;left:0;z-index:2;background:var(--surface1)}
.compact .table tbody td{padding:8px 10px}
.comfy .table tbody td{padding:14px 12px}

/* --- Cell visuals --- */
.badgeTiny{font-size:11px;color:rgba(231,236,243,0.72);padding:2px 6px;border:1px solid var(--border);border-radius:999px}
.progressCell{display:flex;align-items:center;gap:8px}
.progressBar{flex:1;height:8px;background:rgba(255,255,255,0.1);border-radius:999px;overflow:hidden;position:relative}
.progressInner{height:100%;background:linear-gradient(90deg,rgba(62,139,255,0.6),rgba(107,112,255,0.6));border-radius:inherit;transition:width .42s cubic-bezier(.23,1,.32,1),filter .2s ease}
.progressBar:hover .progressInner{filter:brightness(1.06)}
.warn{background:rgba(249,112,102,0.08)}
.good{background:rgba(50,213,131,0.08)}

/* ---- Header chips (replace white badges) ---- */
.thChip{
  appearance:none; border:1px solid var(--border); background:#1a1b1f; color:#fff;
  height:28px; padding:0 10px; border-radius:999px;
  font-size:12px; font-weight:600; display:inline-flex; align-items:center; gap:6px;
}
.thChip:hover{background:#23252A}
.thChip.active{background:#23252A;border-color:#3a3b40}
.thChip .arrow{width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;opacity:.55}
.thChip.asc .arrow{border-bottom:6px solid #BDBDBD}
.thChip.desc .arrow{border-top:6px solid #BDBDBD}

/* make header cells align chips nicely */
.table thead th{padding:8px 10px;vertical-align:middle}

/* ---- Tooltip (lightweight) ---- */
.tipWrap{position:relative;display:inline-flex}
.tipBubble{
  position:absolute;bottom:calc(100% + 8px);left:0;max-width:280px;
  background:#111318;border:1px solid #2B2C30;color:#fff;border-radius:10px;
  padding:8px 10px;font-size:12px;line-height:1.35;box-shadow:var(--elev);z-index:20
}
.tipArrow{position:absolute;top:100%;left:12px;width:0;height:0;
  border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #111318;
  filter:drop-shadow(0 -1px 0 #2B2C30)
}

/* ---- Row tags (CTR/CPC highlights, not cramped) ---- */
.tag{
  display:inline-flex;align-items:center;gap:6px;
  font-size:12px;padding:2px 8px;border-radius:999px;border:1px solid var(--border);
  background:#1a1b1f;color:#fff
}
.tag.warn{background:rgba(255,180,90,.08);border-color:#3a2a12}
.tag.good{background:rgba(139,209,124,.10);border-color:#1e2d1d}

/* keep progress cell spacing sane */
.progressCell{display:flex;align-items:center;gap:8px}

/* Ensure tooltip goes above sticky headers and charts */
.tipBubblePortal{
  z-index: 9999;           /* above everything */
  pointer-events: none;    /* hover stays on the chip */
}

/* Column help bar (sits above the table; obvious & aligned) */
.helpBar {
  display:flex; align-items:center; gap:10px;
  background:#141519; border:1px solid var(--border);
  border-radius:12px; padding:10px 12px; color:#EDEDED;
  box-shadow:var(--elev);
}
.helpBar .iconDot {width:8px;height:8px;border-radius:999px;background:#7f55e0;flex:0 0 8px}
.helpBar .label {font-weight:700;color:#D9DADE}
.helpBar .sep {opacity:.35;margin:0 6px}
.helpBar .text {color:#BDBDBD;line-height:1.35}
.helpBarWrap {margin:8px 0 10px}
/* Reserve vertical space so the table header doesn't jump */
.helpBarSlot {
  min-height: 44px;        /* matches your help bar height */
}

/* Smooth fade for visibility without reflow */
.helpBarWrap {
  height: 44px;
  display: grid;
  align-items: center;
}
.helpBarWrap .helpBar {
  transition: opacity .15s ease;
}
.helpBarWrap[data-visible="false"] .helpBar {
  opacity: 0;
  pointer-events: none;
}

/* Keep header row from clearing hover target */
.theadRow { position: relative; z-index: 2; }

/* Header chips spacing/alignment tweak */
.table thead th .thChip {height:28px;padding:0 12px;font-size:12px}
.table thead th {padding:8px 12px}

/* ===== Results Header (Professional Box) ===== */
.resultsHeader {
  background: linear-gradient(180deg, var(--surface2), var(--surface1));
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px;
  box-shadow: var(--elev);
}

/* Top row: title/controls */
.resultsRow {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 12px;
}

/* Title group */
.resultsTitle {
  display: flex;
  align-items: center;
  gap: 10px;
}
.resultsTitle .eyebrow {
  font-size: 11px;
  letter-spacing: .4px;
  color: #BDBDBD;
  text-transform: uppercase;
  font-weight: 700;
}

/* Controls: search + columns */
.resultsControls {
  display: flex;
  align-items: center;
  gap: 8px;
}
.search {
  position: relative;
}
.search input {
  height: 36px;
  width: 260px;
  border-radius: 10px;
  background: #1a1b1f;
  border: 1px solid var(--border);
  color: #fff;
  padding: 0 12px 0 36px;
}
.search svg {
  position: absolute; left: 10px; top: 50%;
  transform: translateY(-50%); opacity: .6;
}
.colBtn {
  height: 36px; padding: 0 12px;
  border: 1px solid var(--border); border-radius: 10px;
  background: #1a1b1f; color: #fff;
}

/* Column help bar (lives inside header; aligned, no shake) */
.helpBarSlot { min-height: 38px; }
.helpBar {
  display: flex; align-items: center; gap: 8px;
  background: #141519; border: 1px solid var(--border);
  border-radius: 10px; padding: 8px 10px; color: #EDEDED;
}
.helpBar .dot { width: 8px; height: 8px; border-radius: 999px; background: #7f55e0; }
.helpBar .label { font-weight: 700; color: #D9DADE; }
.helpBar .text { color: #BDBDBD; line-height: 1.35; }
.helpBarWrap { margin-top: 8px; }
.helpBarWrap[data-visible="false"] .helpBar { opacity: 0; pointer-events: none; transition: opacity .12s ease; }

/* Column popover (unchanged look, sits by Columns button) */
.colPanel {
  position: absolute; right: 0; margin-top: 8px;
  background: #16171A; border: 1px solid var(--border);
  border-radius: 12px; padding: 10px; min-width: 220px;
  box-shadow: var(--elev); z-index: 10;
}
.colRow { display: flex; align-items: center; gap: 8px; padding: 6px 4px; }
.colRow input { accent-color: var(--primary); }
/* ensure no duplicate spacing above/below header */
.resultsHeader { margin-bottom: 10px; }
.sectionTitle { display: none !important; }

/* subtle size tweak for the help bar to sit tighter */
.helpBarSlot { min-height: 36px; }
.helpBar { padding: 6px 10px; border-radius: 10px; }

/* ===== Manual Split Card (matches results look) ===== */
.cardPro {
  background: linear-gradient(180deg, var(--surface2), var(--surface1));
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--elev);
}

.splitHeader {
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:12px 14px; border-bottom:1px solid var(--border);
}
.splitTitle {
  display:flex; align-items:center; gap:10px;
}
.splitTitle .eyebrow {
  font-size:11px; letter-spacing:.4px; color:#BDBDBD; text-transform:uppercase; font-weight:700;
}
.splitActions { display:flex; gap:8px; }
.splitBtn {
  height:32px; padding:0 12px; border:1px solid var(--border); border-radius:10px;
  background:#1a1b1f; color:#fff;
}
.splitBtn:disabled { opacity:.5; cursor:not-allowed; }

.splitBody { padding:12px 14px; }
.splitGrid {
  display:grid; gap:12px;
  grid-template-columns: repeat(2, minmax(0,1fr));
}
@media (max-width: 980px){
  .splitGrid { grid-template-columns: 1fr; }
}

.fieldRow{
  display:grid; align-items:center; gap:8px;
  grid-template-columns: 1fr auto;
  background:#141519; border:1px solid var(--border); border-radius:12px; padding:10px 12px;
}
.fieldRow .label { font-weight:600; color:#D9DADE; }
.inputPill{
  display:flex; align-items:center; gap:6px;
  background:#1a1b1f; border:1px solid var(--border); border-radius:999px; padding:4px 10px;
}
.inputPill input{
  width:80px; background:transparent; border:none; outline:none; color:#fff; text-align:right;
}
.inputPill .suf{ color:#BDBDBD; font-weight:600; }

.sumBarWrap { margin-top:12px; display:flex; align-items:center; gap:10px; }
.sumText { font-size:12px; color:#BDBDBD; }
.sumBar {
  flex:1; height:8px; border-radius:999px; background:#26272c; overflow:hidden;
  border:1px solid var(--border);
}
.sumInner {
  height:100%; background:linear-gradient(90deg,#5B8CFF,#7F55E0); width:0%;
  transition: width .2s ease;
}
.sumOk { color:#8BD17C; }
.sumWarn { color:#F5B971; }

/* Switch row wrapper to align with card */
.switchRow {
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  background:#141519; border:1px solid var(--border); border-radius:12px; padding:10px 12px; margin-top:12px;
}
.switchRow .hint { color:#BDBDBD; font-size:12px; }

/* ---- Unified chips (platform selector & header chips) ---- */
.chip {
  height:28px; padding:0 12px; border-radius:999px;
  background:#2a1f3f; color:#fff; border:1px solid #3a2b55;
  display:inline-flex; align-items:center; gap:8px; font-weight:600; font-size:12px;
}
.chip.active { background:#7F55E0; border-color:#7F55E0; color:#fff; }
.chip:hover { filter:brightness(1.05); }

/* ---- Card container (same as results) ---- */
.cardPro {
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:28px;
  box-shadow:var(--shadow);
  backdrop-filter:blur(14px);
}

/* Header row in cards */
.cardHead {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  padding:22px 24px 16px;
  border-bottom:1px solid rgba(255,255,255,0.05);
  background:rgba(12,18,28,0.32);
}
.cardEyebrow {
  font-size:11px;
  letter-spacing:.4px;
  color:rgba(231,236,243,0.62);
  text-transform:uppercase;
  font-weight:700;
}
.cardActions { display:flex; gap:8px; }
.cardBtn {
  height:36px;
  padding:0 18px;
  border:1px solid rgba(255,255,255,0.1);
  border-radius:999px;
  background:rgba(255,255,255,0.06);
  color:#ecf3ff;
  font-weight:600;
  backdrop-filter:blur(10px);
  transition:transform .18s ease, background .18s ease;
}
.cardBtn:hover { background:rgba(107,112,255,0.24); transform:translateY(-1px); }
.cardBody { padding:20px 24px 24px; }

/* Two-column responsive grid */
.grid2 { display:grid; gap:16px; grid-template-columns:repeat(2,minmax(0,1fr)); }
@media (max-width:980px){ .grid2{ grid-template-columns:1fr; } }

/* Field row with pill input */
.fieldRow{
  display:grid;
  align-items:center;
  gap:12px;
  grid-template-columns:1fr auto;
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.08);
  border-radius:22px;
  padding:16px 20px;
  backdrop-filter:blur(12px);
}
.fieldLabel{ font-weight:700; color:#ECF3FF; letter-spacing:.01em; }
.pillInput{
  display:flex;
  align-items:center;
  gap:8px;
  background:rgba(6,10,17,0.65);
  border:1px solid rgba(255,255,255,0.1);
  border-radius:999px;
  padding:6px 14px;
  box-shadow:inset 0 1px 0 rgba(255,255,255,0.08);
}
.pillInput input{ width:110px; background:transparent; border:none; outline:none; color:#fff; text-align:right; font-weight:600; }
.pillSuf{ color:rgba(231,236,243,0.7); font-weight:600; letter-spacing:.02em; }

/* Sum bar for % split */
.sumWrap{ margin-top:16px; display:flex; align-items:center; gap:12px; }
.sumText{ font-size:12px; color:rgba(231,236,243,0.72); }
.sumText.ok{ color:#8BD17C; } .sumText.warn{ color:#F5B971; }
.sumBar{
  flex:1;
  height:10px;
  border-radius:999px;
  background:rgba(6,10,17,0.65);
  overflow:hidden;
  border:1px solid rgba(255,255,255,0.1);
  box-shadow:inset 0 1px 0 rgba(255,255,255,0.08);
}
.sumInner{ height:100%; background:linear-gradient(90deg,#5B8CFF,#7F55E0); width:0%; transition:width .2s ease; }

/* ===== Active Settings strip ===== */
.statusStrip {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 8px 0 6px;
}
.statusPill {
  display: inline-flex; align-items: center; gap: 8px;
  height: 28px; padding: 0 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: #1a1b1f; color: #e7e7ea;
  font-size: 12px; font-weight: 600;
}
.statusPill .dot {
  width: 8px; height: 8px; border-radius: 999px; display: inline-block;
  background: #7f55e0; /* default accent */
}
.statusPill.ok   { border-color: #2c6035; background: #142018; color:#d3f2d3; }
.statusPill.ok .dot   { background: #46c36f; }

.statusPill.warn { border-color: #5e471c; background: #231c0e; color:#ffe2b0; }
.statusPill.warn .dot { background: #f5b971; }

.statusPill.off  { border-color: #3a3b40; background: #191a1f; color:#bdbdbd; }
.statusPill.off .dot  { background: #6a6c73; }

/* keep strip aligned with chips above */
.platformsBlock + .statusStrip { margin-top: 6px; }

/* Budget Split card polish */
.chartCard { 
  padding: 16px 20px 12px; border-radius: 16px; 
  background: linear-gradient(180deg, var(--surface2), var(--surface1));
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
}
.chartCard .eyebrow { 
  font-size: 11px; letter-spacing: .08em; color: #9E9E9E; 
  text-transform: uppercase; margin-bottom: 8px; font-weight: 700;
}

/* Turn Recharts legend into a responsive grid */
.chartCard .recharts-legend-wrapper {
  display: grid !important;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)) !important;
  gap: 6px 14px !important;
  align-items: center !important;
  justify-items: start !important;
  padding: 8px 6px 0 !important;
}
.chartCard .recharts-legend-item { margin: 0 !important; }
.chartCard .recharts-legend-item .recharts-legend-item-text { 
  font-size: 12px !important; color: #CFCFCF !important; font-weight: 600 !important;
}

/* Platform chips with color dots */
.chip { 
  display: inline-flex; align-items: center; gap: 8px; 
  padding: 6px 10px; border-radius: 999px;
  background: #232323; color: #EAEAEA; font-size: 12px; font-weight: 600;
}
.chip .dot { width: 10px; height: 10px; border-radius: 3px; }

/* ===== Section card (consistent with results) ===== */
.sectionCard {
  background: rgba(255,255,255,0.03);
  border: 1px solid rgba(255,255,255,0.05);
  border-radius: 28px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(14px);
  overflow: hidden;
}
.sectionHead {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 12px;
  align-items: center;
  padding: 22px 24px 16px;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  background: rgba(12,18,28,0.32);
}
.sectionTitle {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.sectionTitle .eyebrow {
  font-size: 11px;
  letter-spacing: .4px;
  text-transform: uppercase;
  color: rgba(231,236,243,0.62);
  font-weight: 700;
}
.sectionTitle .sub {
  color: rgba(231,236,243,0.78);
  font-size: 14px;
  font-weight: 600;
}

.sectionActions {
  display: flex;
  align-items: center;
  gap: 12px;
}
.secBtn {
  height: 36px;
  padding: 0 18px;
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 999px;
  background: rgba(255,255,255,0.06);
  color: #ecf3ff;
  font-weight: 600;
  backdrop-filter: blur(10px);
  transition: transform .18s ease, background .18s ease;
}
.secBtn:hover {
  background: rgba(107,112,255,0.24);
  transform: translateY(-1px);
}
.secBtn.primary {
  background: linear-gradient(135deg, var(--ac-1), var(--ac-2));
  border-color: rgba(107,112,255,0.6);
  color: #fff;
}

.sectionBody {
  padding: 20px 24px 24px;
  display: grid;
  gap: 16px;
}
.rowCard {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 22px;
  padding: 18px 22px;
  backdrop-filter: blur(12px);
}
.rowCard .title { color: #ECF3FF; font-weight: 700; letter-spacing: .01em; }
.rowCard .sub { color: rgba(231,236,243,0.7); font-size: 12px; margin-top: 4px; }
.rowCard.warn {
  border-color: rgba(255, 184, 79, 0.55);
  background: rgba(68, 48, 12, 0.45);
}
.rowCard.warn .title { color: #ffe8bc; }
.rowCard.warn .sub { color: #f5d08a; }

/* Tiny mode segment */
.modeSeg { display:inline-flex; background:#1a1b1f; border:1px solid var(--border); border-radius:10px; padding:2px; }
.modeSeg button { height:28px; padding:0 10px; border-radius:8px; border:none; background:transparent; color:#fff; }
.modeSeg button.active { background:#2a2b30; }

/* ===== Pro Switch (Apple/Slack-like) ===== */
.switch {
  position: relative; display: inline-flex; width: 44px; height: 24px;
  vertical-align: middle; cursor: pointer;
}
.switch input { position:absolute; opacity:0; width:0; height:0; }
.switch .slider {
  position: absolute; inset: 0;
  background: #2a2b30; border: 1px solid var(--border);
  border-radius: 999px; transition: background .18s ease, border-color .18s ease, box-shadow .18s ease;
}
.switch .slider::before {
  content: ""; position: absolute; top: 50%; left: 3px; transform: translateY(-50%);
  width: 18px; height: 18px; border-radius: 999px; background: #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,.35); transition: transform .18s ease;
}
.switch input:checked + .slider { background: #7F55E0; border-color: #7F55E0; }
.switch input:checked + .slider::before { transform: translate(20px, -50%); }
.switch:focus-within .slider { box-shadow: 0 0 0 3px rgba(127,85,224,.28); }
